(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{145:function(e,t,n){},146:function(e,t,n){},148:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){"use strict";n.r(t);var a,c=n(2),o=n(0),r=n(25),i=n.n(r),s=n(33),l=n(22),u=n(116),b=n(103),j=n(21),d=n.n(j),p=n(20),O=n(15),m=n(13),f=n(16),g=n(73),h=n.n(g),v=function(e){return h.a.post("/api/shop",e)},x=function(){return h.a.get("/api/shop")},C=function(e){return h.a.get("/api/shop/".concat(e))},k=d.a.mark(P),L=d.a.mark(R),E="form/CREATE_SHOP",w="form/CREATE_SHOP_SUCCESS",y="form/CREATE_SHOP_FAILURE",A="form/CHANGE_NAME",S="form/CHANGE_TYPE",M="form/CHANGE_ADDRESS",N="form/CHANGE_GEO_LOCATION",_="form/CHANGE_TIME",T=Object(f.createAction)(E,(function(e){return e}))(),G=(Object(f.createAction)(w,(function(e){return e}))(),Object(f.createAction)(y,(function(e){return e}))(),Object(f.createAction)(A,(function(e){return e}))()),D=Object(f.createAction)(S,(function(e){return e}))(),H=(Object(f.createAction)(M,(function(e){return e}))(),Object(f.createAction)(N,(function(e){return e}))(),Object(f.createAction)(_,(function(e){return e}))());function P(e){var t,n;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload,a.prev=1,a.next=4,Object(p.b)(v,t);case 4:return n=a.sent,a.next=7,Object(p.d)({type:w,payload:n});case 7:a.next=14;break;case 9:return a.prev=9,a.t0=a.catch(1),a.next=13,Object(p.d)({type:y,payload:a.t0});case 13:console.log(a.t0);case 14:case"end":return a.stop()}}),k,null,[[1,9]])}function R(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.f)(E,P);case 2:case"end":return e.stop()}}),L)}var V,B=Object(f.createReducer)({name:"",type:"",geoLocation:[33.450701,126.570667],address:"",time:["00:00","00:00"]},(a={},Object(O.a)(a,w,(function(e,t){return Object(m.a)({},e)})),Object(O.a)(a,y,(function(e,t){return Object(m.a)({},e)})),Object(O.a)(a,A,(function(e,t){var n=t.payload;return Object(m.a)(Object(m.a)({},e),{},{name:n})})),Object(O.a)(a,S,(function(e,t){var n=t.payload;return Object(m.a)(Object(m.a)({},e),{},{type:n})})),Object(O.a)(a,N,(function(e,t){var n=t.payload;return Object(m.a)(Object(m.a)({},e),{},{geoLocation:n})})),Object(O.a)(a,M,(function(e,t){var n=t.payload;return Object(m.a)(Object(m.a)({},e),{},{address:n})})),Object(O.a)(a,_,(function(e,t){var n=t.payload;return Object(m.a)(Object(m.a)({},e),{},{time:n})})),a)),I=n(23),F=d.a.mark($),U=d.a.mark(ee),z=d.a.mark(te),W="shop/GET_ALL_SHOP",Y="shop/GET_ALL_SHOP_SUCCESS",J="shop/GET_ALL_SHOP_FAILURE",X="shop/GET_SELECTED_SHOP",K="shop/GET_SELECTED_SHOP_SUCCESS",q="shop/GET_SELECTED_SHOP_FAILURE",Q=Object(f.createAction)(W)(),Z=(Object(f.createAction)(Y,(function(e){return e}))(),Object(f.createAction)(J,(function(e){return e}))(),Object(f.createAction)(X,(function(e){return e}))());Object(f.createAction)(K,(function(e){return e}))(),Object(f.createAction)(q,(function(e){return e}))();function $(){var e,t;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(p.b)(x);case 3:return e=n.sent,t=e.data.allShop,n.next=7,Object(p.d)({type:Y,payload:t});case 7:n.next=14;break;case 9:return n.prev=9,n.t0=n.catch(0),n.next=13,Object(p.d)({type:J,payload:n.t0});case 13:console.log(n.t0);case 14:case"end":return n.stop()}}),F,null,[[0,9]])}function ee(e){var t,n,a;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload,c.prev=1,c.next=4,Object(p.b)(C,t);case 4:return n=c.sent,a=n.data.selectedShop,c.next=8,Object(p.d)({type:K,payload:a});case 8:c.next=15;break;case 10:return c.prev=10,c.t0=c.catch(1),c.next=14,Object(p.d)({type:q,payload:c.t0});case 14:console.log(c.t0);case 15:case"end":return c.stop()}}),U,null,[[1,10]])}function te(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.e)(W,$);case 2:return e.next=4,Object(p.e)(X,ee);case 4:case"end":return e.stop()}}),z)}var ne,ae=Object(f.createReducer)({shopList:[],type:""},(V={},Object(O.a)(V,Y,(function(e,t){var n=t.payload;return e.shopList=Object(I.a)(n),e.type="",Object(m.a)({},e)})),Object(O.a)(V,J,(function(e){return Object(m.a)({},e)})),Object(O.a)(V,K,(function(e,t){var n=t.payload;return e.shopList=Object(I.a)(n),e.type="",Object(m.a)({},e)})),Object(O.a)(V,q,(function(e){return Object(m.a)({},e)})),V)),ce="map/TOGGLE_MAP",oe="map/CHANGE_LOCATION",re="map/CHANGE_LOCATION_NUM",ie=Object(f.createAction)(ce)(),se=Object(f.createAction)(oe,(function(e){return e}))(),le=Object(f.createAction)(re,(function(e){return e}))(),ue=Object(f.createReducer)({isMapVisible:!1,geoLocation:[0,0],address:""},(ne={},Object(O.a)(ne,ce,(function(e){return Object(m.a)(Object(m.a)({},e),{},{isMapVisible:!e.isMapVisible})})),Object(O.a)(ne,oe,(function(e,t){var n=t.payload;return Object(m.a)(Object(m.a)({},e),{},{geoLocation:n})})),Object(O.a)(ne,re,(function(e,t){var n=t.payload;return Object(m.a)(Object(m.a)({},e),{},{address:n})})),ne)),be="modal/TOGGLE_MODAL",je=Object(f.createAction)(be)(),de=Object(f.createReducer)({isModalVisible:!1},Object(O.a)({},be,(function(e){return Object(m.a)(Object(m.a)({},e),{},{isModalVisible:!e.isModalVisible})}))),pe=d.a.mark(me),Oe=Object(s.combineReducers)({form:B,shop:ae,map:ue,modal:de});function me(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)([Object(p.c)(R),Object(p.c)(te)]);case 2:case"end":return e.stop()}}),pe)}n(145);var fe=n(43),ge=n(17),he=n(42),ve=n(89),xe=(n(78),function(e,t){return[-(t-window.innerHeight/2)/20,(e-window.innerWidth/2)/20,1.3]}),Ce=function(e,t,n){return"perspective(400px) rotateX(".concat(e,"deg) rotateY(").concat(t,"deg) scale(").concat(n,")")},ke=function(){var e=Object(ve.b)((function(){return{xys:[0,0,1],config:{mass:5,tension:700,friction:40}}})),t=Object(he.a)(e,2),n=t[0],a=t[1];return Object(c.jsx)(ve.a.div,{className:"boong",onMouseMove:function(e){var t=e.clientX,n=e.clientY;return a({xys:xe(t,n)})},onMouseLeave:function(){return a({xys:[0,0,1]})},style:{transform:n.xys.interpolate(Ce)}})},Le=function(){var e=Object(o.useState)(!1),t=Object(he.a)(e,2),n=t[0],a=t[1];return Object(c.jsx)("div",{className:"ho icon "+(n?"fall":""),onMouseOver:function(){n||(a(!0),setTimeout((function(){return a(!1)}),2e3))},children:n&&Object(c.jsx)("img",{src:"https://media.vlpt.us/images/dolarge/post/b97ad49f-d383-46dd-aa09-bdb33372eb2b/smoke.png",alt:"smoke"})})},Ee=function(){var e=Object(o.useState)(!1),t=Object(he.a)(e,2),n=t[0],a=t[1];return Object(c.jsx)("div",{className:"ta icon "+(n?"roll":""),onMouseOver:function(){console.log(123),a(!0),setTimeout((function(){return a(!1)}),2e3)}})},we=function(e){var t=Object(l.b)(),n=e.kakao,a=Object(l.c)((function(e){return e.map})),c=a.geoLocation,r=a.address,i=a.isMapVisible,s=Object(o.useCallback)((function(e,a){var c=new n.maps.services.Geocoder,o=new n.maps.LatLng(e,a);c.coord2Address(o.getLng(),o.getLat(),(function(e,a){a===n.maps.services.Status.OK&&t(le(e[0].address.address_name))}))}),[t,n]),u=Object(o.useCallback)((function(n){n.preventDefault(),e.navigator.geolocation?e.navigator.geolocation.getCurrentPosition((function(e){var n=e.coords.latitude,a=e.coords.longitude;t(se([n,a])),s(n,a)})):console.log("geolocation\uc744 \uc0ac\uc6a9\ud560\uc218 \uc5c6\uc5b4\uc694..")}),[t,e,s]),b=Object(o.useCallback)((function(e){e.preventDefault(),t(ie())}),[t]),j=Object(o.useCallback)((function(e){e.preventDefault(),t(ie()),s.apply(void 0,Object(I.a)(c))}),[t,c,s]),d=Object(o.useCallback)((function(a){e.navigator.geolocation?e.navigator.geolocation.getCurrentPosition((function(e){var c=e.coords.latitude,o=e.coords.longitude,r={center:new n.maps.LatLng(c,o),level:3},i=new n.maps.Map(a.current,r),s=new n.maps.Marker({position:i.getCenter(),clickable:!0});s.setMap(i),n.maps.event.addListener(i,"click",(function(e){var n=e.latLng,a=n.getLat(),c=n.getLng();t(se([a,c])),s.setPosition(n),s.setDraggable(!0)}))})):console.log("geolocation\uc744 \uc0ac\uc6a9\ud560\uc218 \uc5c6\uc5b4\uc694..")}),[t,e,n]);return{geoLocation:c,address:r,isMapVisible:i,getAddress:s,findMyGeoLocation:u,findMapGeoLocation:b,addSelectedGeoLocation:j,showMap:d}},ye=(n(146),function(){var e=Object(o.useRef)(),t=we(window),n=t.addSelectedGeoLocation,a=t.showMap,r=t.isMapVisible;return Object(o.useEffect)((function(){r&&a(e)}),[]),Object(c.jsxs)("div",{className:"mini-map-container",children:[Object(c.jsx)("div",{ref:e,className:"mini-map-box"}),Object(c.jsx)("button",{className:"add-btn",onClick:n,children:Object(c.jsx)("p",{children:"+"})})]})}),Ae=n(40),Se=n.n(Ae),Me=n(181),Ne=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.form}));return{name:t.name,type:t.type,time:t.time,isModalVisible:Object(l.c)((function(e){return e.modal})).isModalVisible,onChangeName:Object(o.useCallback)((function(t){e(G(t))}),[e]),onChangeType:Object(o.useCallback)((function(t){return e(D(t))}),[e]),onChangeTime:Object(o.useCallback)((function(t){return e(H(t))}),[e]),onSubmit:Object(o.useCallback)((function(t){e(je()),console.log(t),e(T(t))}),[e]),onCancel:Object(o.useCallback)((function(t){t.preventDefault(),e(je())}),[e]),onOpenForm:Object(o.useCallback)((function(){return e(je())}),[e])}},_e=(n(148),Me.a.RangePicker),Te=function(){var e=Ne(),t=e.name,n=e.type,a=e.time,r=e.onChangeName,i=e.onChangeType,s=e.onChangeTime,l=e.onSubmit,u=e.onCancel,b=we(window),j=b.findMyGeoLocation,d=b.findMapGeoLocation,p=b.geoLocation,O=b.address;Object(o.useEffect)((function(){console.log(789)}),[t,n,p,O,a]);var m=Object(o.useCallback)((function(e){return Se()(e)}),[]);return Object(c.jsxs)("form",{className:"modal-form",onSubmit:function(e){e.preventDefault(),""!==t?""!==n&&""!==O&&"00:00"!==a[0]&&"00:00"!==a[1]&&l({name:t,type:n,geoLocation:p,address:O,time:a}):alert("\uac00\uac8c\uc774\ub984\ubb54\ub370")},children:[Object(c.jsxs)("div",{className:"kind-box",onChange:function(e){return i(e.target.value)},children:[Object(c.jsx)("input",{name:"food",type:"radio",value:"boong",id:"boong",className:"boong-mini"}),Object(c.jsx)("label",{className:"boong-label",htmlFor:"boong"}),Object(c.jsx)("input",{name:"food",type:"radio",id:"ho",value:"ho",className:"ho-mini"}),Object(c.jsx)("label",{className:"ho-label",htmlFor:"ho"}),Object(c.jsx)("input",{name:"food",type:"radio",id:"ta",value:"ta",className:"ta-mini"}),Object(c.jsx)("label",{className:"ta-label",htmlFor:"ta"})]}),Object(c.jsxs)("div",{className:"input-box",children:[Object(c.jsxs)("div",{className:"input-box_name",children:[Object(c.jsx)("label",{htmlFor:"name",children:"\uac00\uac8c\uba85"}),Object(c.jsx)("input",{onChange:function(e){return r(e.target.value)},value:t,id:"name",name:"name"})]}),Object(c.jsxs)("div",{className:"input-box_location",children:[Object(c.jsx)("label",{htmlFor:"location",children:"\uac00\uac8c\uc704\uce58"}),Object(c.jsx)("input",{id:"location",name:"location",value:O}),Object(c.jsxs)("div",{className:"button-box_location",children:[Object(c.jsx)("button",{onClick:d,children:"\uc9c0\ub3c4\uc5d0\uc11c \ucc3e\uae30"}),Object(c.jsx)("button",{onClick:j,children:"\ud604\uc7ac \uc704\uce58"})]})]}),Object(c.jsxs)("div",{className:"input-box_time",children:[Object(c.jsx)("label",{htmlFor:"time",children:"\uc601\uc5c5\uc2dc\uac04"}),Object(c.jsx)(_e,{format:"HH:mm",bordered:!1,className:"time",onChange:function(e,t){return s(m(t)._i)}})]})]}),Object(c.jsxs)("div",{className:"button-box",children:[Object(c.jsx)("button",{onClick:u,children:"\ub4a4\ub85c\uac00\uae30"}),Object(c.jsx)("button",{type:"submit",children:"\ub4f1\ub85d\ud558\uae30"})]})]})},Ge=(n(173),function(){var e=we(window).isMapVisible;return Object(c.jsx)("div",{className:"modal-container",children:e?Object(c.jsx)(ye,{}):Object(c.jsx)(Te,{})})}),De=(n(174),function(){var e=Ne(),t=e.onOpenForm,n=e.isModalVisible;return Object(c.jsxs)("div",{className:"landing-container",children:[Object(c.jsxs)("main",{children:[Object(c.jsx)(fe.b,{to:"/map/boong",children:Object(c.jsx)(ke,{})}),Object(c.jsx)(fe.b,{to:"/map/ho",children:Object(c.jsx)(Le,{})}),Object(c.jsx)(fe.b,{to:"/map/ta",children:Object(c.jsx)(Ee,{})})]}),Object(c.jsx)("button",{onClick:t,children:"\ubd95\ud638\ud0c0 + "}),n&&Object(c.jsx)(Ge,{})]})}),He=n(74),Pe=function(e,t){var n=e.kakao,a=Object(o.useState)({setCenter:function(e){}}),c=Object(he.a)(a,2),r=c[0],i=c[1],s=Object(l.c)((function(e){return e.map})),u=s.geoLocation,b=s.address,j=s.isMapVisible,d=Object(l.c)((function(e){return e.shop})).shopList;Object(o.useEffect)((function(){console.log(r),1===Object.keys(r).length&&i(new n.maps.Map(t.current,{center:Object(He.a)(n.maps.LatLng,Object(I.a)(u)),level:3}))}),[r,n,u,t]);var p=Object(o.useCallback)((function(e,t){if(Object.keys(r).length>1){var a=new n.maps.Marker({map:r,position:e}),c=t;new n.maps.InfoWindow({content:c,removable:!0}).open(r,a),r.setCenter(e)}}),[n,r]),O=Object(o.useCallback)((function(){if(e.navigator.geolocation)e.navigator.geolocation.getCurrentPosition((function(e){var t=e.coords.latitude,a=e.coords.longitude,c=new n.maps.LatLng(t,a);p(c,'<div style="padding:5px; ">\ub0b4 \uc704\uce58</div>')}));else{var t=Object(He.a)(n.maps.LatLng,Object(I.a)(u));p(t,"geolocation\uc744 \uc0ac\uc6a9\ud560\uc218 \uc5c6\uc5b4\uc694..")}}),[p,n,e,u]),m=Object(o.useCallback)((function(){O()}),[O]),f=Object(o.useCallback)((function(e){var t,a;switch(e){case"boong":t="https://media.vlpt.us/images/dolarge/post/9df7aa9c-5827-4928-8711-25763612cc5f/%EB%B6%95%EC%96%B4.png",a=new n.maps.Size(35,24);break;case"ho":t="https://media.vlpt.us/images/dolarge/post/18a0d072-1987-44e6-a8dc-74fb5d40a337/%ED%98%B8%EB%96%A1.png",a=new n.maps.Size(30,30);break;case"ta":t="https://media.vlpt.us/images/dolarge/post/9afdecdf-2a14-4079-9c06-487d657c6c7e/%ED%83%80%EC%BD%94.png",a=new n.maps.Size(30,30);break;default:t="https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/markerStar.png",a=new n.maps.Size(24,35)}return[t,a]}),[n.maps.Size]),g=Object(o.useCallback)((function(e){var t='<div class="marker-info"><p class="name">'.concat(e.name,'</p><p class="address">').concat(e.address,'</p><p class="time">').concat(e.time[0],"-").concat(e.time[1],"</p></div>");return new n.maps.InfoWindow({content:t})}),[n.maps.InfoWindow]),h=Object(o.useCallback)((function(e){var t=[];if(Object.keys(r).length>1)for(var a=0;a<e.length;a++){var c=f(e[a].type),o=Object(he.a)(c,2),i=o[0],s=o[1],l=new n.maps.MarkerImage(i,s),u=new n.maps.Marker({map:r,position:Object(He.a)(n.maps.LatLng,Object(I.a)(e[a].geoLocation)),image:l});t.push(u),function(e,t){n.maps.event.addListener(e,"mouseover",(function(){t.open(r,e)})),n.maps.event.addListener(e,"mouseout",(function(){t.close()}))}(u,g(e[a]))}return t}),[n,r,f]);return{map:r,shopList:d,geoLocation:u,address:b,isMapVisible:j,drawMap:m,drawMarkers:h}},Re=function(){var e=Object(l.b)();return{showAllShop:Object(o.useCallback)((function(){e(Q())}),[e]),showSelectedShop:Object(o.useCallback)((function(t){e(Z(t))}),[e])}},Ve=n(182),Be=(n(176),function(e){var t=e.match.params.id,n=Object(o.useRef)(),a=Pe(window,n),r=a.map,i=a.shopList,s=a.drawMap,l=a.drawMarkers,u=Re(),b=u.showAllShop,j=u.showSelectedShop,d=[];Object(o.useEffect)((function(){s(),Object.keys(r).length>1&&j(t)}),[r,t,s,j]),Object(o.useEffect)((function(){0===d.length&&(d=l(i))}),[i]);var p=function(e){d.map((function(e){return e.setMap(null)})),e?j(e):b()};return Object(c.jsxs)("div",{className:"map-container",children:[Object(c.jsx)("div",{id:"map",className:"map-box",ref:n}),Object(c.jsxs)("ul",{className:"button-box",children:[Object(c.jsx)("li",{children:Object(c.jsx)(fe.b,{to:"/",children:Object(c.jsx)(Ve.a,{className:"home-icon"})})}),Object(c.jsx)("li",{children:Object(c.jsx)("img",{src:"https://media.vlpt.us/images/dolarge/post/aa3ea81d-4b5a-431a-9f22-090bdbea1a71/all.png",onClick:function(){return p("")},alt:"select-all-button"})}),Object(c.jsx)("li",{children:Object(c.jsx)("img",{src:"https://media.vlpt.us/images/dolarge/post/9df7aa9c-5827-4928-8711-25763612cc5f/%EB%B6%95%EC%96%B4.png",onClick:function(){return p("boong")},alt:"boong-button"})}),Object(c.jsx)("li",{children:Object(c.jsx)("img",{src:"https://media.vlpt.us/images/dolarge/post/18a0d072-1987-44e6-a8dc-74fb5d40a337/%ED%98%B8%EB%96%A1.png",onClick:function(){return p("ho")},alt:"ho-button"})}),Object(c.jsx)("li",{children:Object(c.jsx)("img",{src:"https://media.vlpt.us/images/dolarge/post/9afdecdf-2a14-4079-9c06-487d657c6c7e/%ED%83%80%EC%BD%94.png",onClick:function(){return p("ta")},alt:"ta-button"})})]})]})}),Ie=function(){return Object(c.jsx)("div",{className:"App",children:Object(c.jsxs)(fe.a,{children:[Object(c.jsx)("header",{children:Object(c.jsx)(fe.b,{to:"/",children:Object(c.jsx)("img",{src:"https://media.vlpt.us/images/dolarge/post/0f4e3ed7-c07c-4e48-afea-dba71b3b306b/logo.png",alt:"logo"})})}),Object(c.jsxs)(ge.c,{children:[Object(c.jsx)(ge.a,{path:"/",exact:!0,component:De}),Object(c.jsx)(ge.a,{path:"/map/:id",component:Be})]})]})})},Fe=Object(u.a)(),Ue=Object(s.createStore)(Oe,Object(b.composeWithDevTools)(Object(s.applyMiddleware)(Fe)));Fe.run(me),i.a.render(Object(c.jsx)(l.a,{store:Ue,children:Object(c.jsx)(Ie,{})}),document.getElementById("root"))},78:function(e,t,n){}},[[177,1,2]]]);
//# sourceMappingURL=main.0553bf93.chunk.js.map